# é¡¹ç›®é‡æ„æ€»ç»“

## ğŸ¯ é‡æ„ç›®æ ‡

å°†åŸæœ‰çš„ Python + Flask æ¶æ„é‡æ„ä¸º **Node.js + React + MUI v7** çš„ç°ä»£åŒ–ã€äºŒæ¬¡å…ƒé£æ ¼åœ¨çº¿æ­Œå•ç³»ç»Ÿã€‚

## âœ… å®Œæˆæƒ…å†µ

æ‰€æœ‰åŠŸèƒ½å·²æŒ‰è¦æ±‚ä¸€æ¬¡æ€§å®Œæ•´å®ç°ï¼ŒåŒ…æ‹¬ï¼š

### 1. åç«¯ç³»ç»Ÿ (Node.js + Express + SQLite)

âœ… æ•°æ®åº“è®¾è®¡ä¸åˆå§‹åŒ–
- SQLite æ•°æ®åº“ï¼Œæ”¯æŒå¤šè¡¨ç»“æ„
- ç®¡ç†å‘˜ã€æ­Œå•ã€ç«™ç‚¹é…ç½®ã€ä¸»æ’­ä¿¡æ¯è¡¨
- è‡ªåŠ¨ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½

âœ… å®Œæ•´çš„ API ç³»ç»Ÿ
- RESTful API è®¾è®¡
- Session è®¤è¯æœºåˆ¶
- æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
- é”™è¯¯å¤„ç†ä¸­é—´ä»¶

âœ… ä¸šåŠ¡é€»è¾‘å®ç°
- æ­Œå• CRUD æ“ä½œ
- ç­›é€‰ã€æœç´¢ã€åˆ†é¡µ
- JSON å¯¼å…¥å¯¼å‡º
- ç«™ç‚¹é…ç½®ç®¡ç†

### 2. å‰ç«¯ç³»ç»Ÿ (React + MUI v7)

âœ… äºŒæ¬¡å…ƒé£æ ¼ç•Œé¢
- æ¶²æ€ç»ç’ƒæ•ˆæœï¼ˆGlassmorphismï¼‰
- æ¸å˜è‰²å½©ç³»ç»Ÿ
- æµç•…åŠ¨ç”»è¿‡æ¸¡
- æ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢

âœ… æ ¸å¿ƒé¡µé¢
- å®‰è£…å‘å¯¼é¡µé¢ï¼ˆ3æ­¥å¼•å¯¼ï¼‰
- æ­Œå•å±•ç¤ºä¸»é¡µï¼ˆç­›é€‰ã€æœç´¢ã€åˆ†é¡µï¼‰
- ç®¡ç†å‘˜ç™»å½•é¡µé¢
- ç®¡ç†åå°ï¼ˆ4ä¸ªåŠŸèƒ½é¢æ¿ï¼‰

âœ… äº¤äº’åŠŸèƒ½
- é˜²æŠ–æœç´¢
- ä¸€é”®å¤åˆ¶æ­Œæ›²å
- æ–‡ä»¶ä¸Šä¼ é¢„è§ˆ
- å®æ—¶ç­›é€‰

### 3. å·¥å…·ä¸è„šæœ¬

âœ… XLSX è½¬ JSON å·¥å…·
- è‡ªåŠ¨è¯†åˆ«è¡¨å¤´
- æ™ºèƒ½æå–é¦–å­—æ¯
- ç»Ÿè®¡ä¿¡æ¯è¾“å‡º
- å‘½ä»¤è¡Œå‹å¥½

âœ… å¯åŠ¨è„šæœ¬
- Linux/macOS è„šæœ¬ (start.sh)
- Windows æ‰¹å¤„ç† (start.bat)
- è‡ªåŠ¨ç¯å¢ƒæ£€æŸ¥

### 4. éƒ¨ç½²ä¸ CI/CD

âœ… Docker å®¹å™¨åŒ–
- å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–
- æ•°æ®æŒä¹…åŒ–
- å¥åº·æ£€æŸ¥
- ç½‘ç»œéš”ç¦»

âœ… GitHub Actions
- è‡ªåŠ¨æ„å»ºé•œåƒ
- å¤šæ¶æ„æ”¯æŒ (amd64/arm64)
- è‡ªåŠ¨å‘å¸ƒ Release
- Docker Hub æ¨é€

### 5. æ–‡æ¡£ç³»ç»Ÿ

âœ… å®Œæ•´æ–‡æ¡£
- README.mdï¼ˆä½¿ç”¨æŒ‡å—ï¼‰
- INSTALL.mdï¼ˆå®‰è£…æŒ‡å—ï¼‰
- CHANGELOG.mdï¼ˆæ›´æ–°æ—¥å¿—ï¼‰
- API æ–‡æ¡£è¯´æ˜
- æ•…éšœæ’é™¤æŒ‡å—

## ğŸ“ é¡¹ç›®ç»“æ„

```
the_next/
â”œâ”€â”€ backend/                      # Node.js åç«¯
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â””â”€â”€ init.js              # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â””â”€â”€ auth.js              # è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ setup.js             # å®‰è£…è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth.js              # è®¤è¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ playlist.js          # æ­Œå•è·¯ç”±
â”‚   â”‚   â””â”€â”€ site.js              # ç«™ç‚¹è·¯ç”±
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ setupService.js      # å®‰è£…æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ authService.js       # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ playlistService.js   # æ­Œå•æœåŠ¡
â”‚   â”‚   â””â”€â”€ siteService.js       # ç«™ç‚¹æœåŠ¡
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â””â”€â”€ xlsx2json.js         # XLSX è½¬æ¢å·¥å…·
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ index.js                 # å…¥å£æ–‡ä»¶
â”‚
â”œâ”€â”€ frontend/                     # React å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ AppLayout.jsx    # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ admin/
â”‚   â”‚   â”‚       â”œâ”€â”€ SiteConfigPanel.jsx      # ç«™ç‚¹é…ç½®
â”‚   â”‚   â”‚       â”œâ”€â”€ PlaylistManagePanel.jsx  # æ­Œå•ç®¡ç†
â”‚   â”‚   â”‚       â”œâ”€â”€ StreamerPanel.jsx        # ä¸»æ’­ä¿¡æ¯
â”‚   â”‚   â”‚       â””â”€â”€ ImportExportPanel.jsx    # å¯¼å…¥å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ SetupPage.jsx    # å®‰è£…é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ HomePage.jsx     # ä¸»é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginPage.jsx    # ç™»å½•é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ AdminPage.jsx    # ç®¡ç†åå°
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ api.js           # API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ theme/
â”‚   â”‚   â”‚   â””â”€â”€ theme.js         # ä¸»é¢˜é…ç½®
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â””â”€â”€ helpers.js       # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ App.jsx              # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.jsx             # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â””â”€â”€ index.html
â”‚
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ docker-publish.yml    # GitHub Actions
â”‚
â”œâ”€â”€ Dockerfile                    # Docker æ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml            # Docker Compose é…ç½®
â”œâ”€â”€ .dockerignore                 # Docker å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ .gitignore                    # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ start.sh                      # Linux/macOS å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start.bat                     # Windows å¯åŠ¨è„šæœ¬
â”œâ”€â”€ example-playlist.json         # ç¤ºä¾‹æ­Œå•
â”œâ”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ INSTALL.md                    # å®‰è£…æŒ‡å—
â”œâ”€â”€ CHANGELOG.md                  # æ›´æ–°æ—¥å¿—
â”œâ”€â”€ LICENSE                       # MIT è®¸å¯è¯
â””â”€â”€ PROJECT_SUMMARY.md            # æœ¬æ–‡ä»¶
```

## ğŸ¨ æŠ€æœ¯æ ˆ

### åç«¯
- **è¿è¡Œæ—¶**: Node.js 20 LTS
- **æ¡†æ¶**: Express.js 4.x
- **æ•°æ®åº“**: better-sqlite3ï¼ˆSQLiteï¼‰
- **è®¤è¯**: express-session + bcrypt
- **æ–‡ä»¶ä¸Šä¼ **: multer
- **å·¥å…·**: xlsx, uuid, dotenv

### å‰ç«¯
- **æ¡†æ¶**: React 18.3
- **UI åº“**: Material-UI (MUI) v7
- **æ„å»ºå·¥å…·**: Vite 5
- **è·¯ç”±**: React Router v6
- **HTTP å®¢æˆ·ç«¯**: Axios
- **æ ·å¼**: Emotion

### éƒ¨ç½²
- **å®¹å™¨**: Docker + Docker Compose
- **CI/CD**: GitHub Actions
- **è¿›ç¨‹ç®¡ç†**: PM2ï¼ˆå¯é€‰ï¼‰

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

### ç•Œé¢è®¾è®¡
- âœ¨ äºŒæ¬¡å…ƒé£æ ¼ï¼Œæ¸å˜è‰²å½©
- ğŸ«§ æ¶²æ€ç»ç’ƒæ•ˆæœï¼ˆGlassmorphismï¼‰
- ğŸŒ“ æ·±è‰²/æµ…è‰²ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢
- ğŸ­ å¹³æ»‘åŠ¨ç”»ä¸è¿‡æ¸¡æ•ˆæœ
- ğŸ“± å®Œå…¨å“åº”å¼è®¾è®¡

### åŠŸèƒ½ç‰¹æ€§
- ğŸ” å¼ºå¤§çš„ç­›é€‰ç³»ç»Ÿï¼ˆé¦–å­—æ¯ã€è¯­ç§ã€ç‰¹æ®Šæ­Œæ›²ï¼‰
- ğŸ” é˜²æŠ–æœç´¢ï¼ˆ300ms å»¶è¿Ÿï¼‰
- ğŸ“‹ ä¸€é”®å¤åˆ¶æ­Œæ›²ååˆ°å‰ªè´´æ¿
- ğŸ“„ åˆ†é¡µæµè§ˆï¼Œæ”¯æŒå‰åç¿»é¡µ
- ğŸ›ï¸ å®Œæ•´çš„ç®¡ç†åå°
- ğŸ“¦ JSON å¯¼å…¥å¯¼å‡ºå¤‡ä»½
- ğŸ”§ XLSX è½¬ JSON å·¥å…·
- ğŸ–¼ï¸ å›¾ç‰‡ä¸Šä¼ ä¸ç®¡ç†
- ğŸ¨ è‡ªå®šä¹‰ä¸»é¢˜è‰²è°ƒ

### æŠ€æœ¯ç‰¹æ€§
- ğŸ” Session è®¤è¯æœºåˆ¶
- ğŸ—ƒï¸ SQLite æ•°æ®åº“ï¼Œè½»é‡é«˜æ•ˆ
- ğŸ“¡ RESTful API è®¾è®¡
- ğŸ”„ è‡ªåŠ¨æ•°æ®åº“ç´¢å¼•
- ğŸš€ å‰ç«¯æ‡’åŠ è½½ä¸ä»£ç åˆ†å‰²
- ğŸ’¾ æ•°æ®æŒä¹…åŒ–åˆ° `/data` ç›®å½•
- ğŸ©º å¥åº·æ£€æŸ¥æ¥å£
- ğŸ“Š è¯¦ç»†æ—¥å¿—è¾“å‡º

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### ä¸€é”®å¯åŠ¨

**Linux/macOS:**
```bash
./start.sh
```

**Windows:**
```cmd
start.bat
```

### Docker å¯åŠ¨

```bash
docker-compose up -d
```

### è®¿é—®åº”ç”¨

- ä¸»é¡µ: http://localhost:3001
- ç®¡ç†åå°: http://localhost:3001/admin/login

é¦–æ¬¡è®¿é—®ä¼šè¿›å…¥å®‰è£…å‘å¯¼ã€‚

## ğŸ“Š æ•°æ®åº“ç»“æ„

### admin è¡¨ï¼ˆç®¡ç†å‘˜ï¼‰
- id: ä¸»é”®
- username: ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰
- password_hash: å¯†ç å“ˆå¸Œ
- created_at: åˆ›å»ºæ—¶é—´

### playlist è¡¨ï¼ˆæ­Œå•ï¼‰
- id: ä¸»é”®
- songName: æ­Œæ›²å
- singer: æ­Œæ‰‹
- language: è¯­ç§
- category: ç§ç±»
- special: æ˜¯å¦ç‰¹æ®Šæ­Œæ›²ï¼ˆ0/1ï¼‰
- firstLetter: é¦–å­—æ¯
- created_at: åˆ›å»ºæ—¶é—´
- updated_at: æ›´æ–°æ—¶é—´

### site_config è¡¨ï¼ˆç«™ç‚¹é…ç½®ï¼‰
- id: ä¸»é”®ï¼ˆå›ºå®šä¸º1ï¼‰
- site_name: ç«™ç‚¹åç§°
- default_playlist_name: é»˜è®¤æ­Œå•åç§°
- avatar_url: å¤´åƒ URL
- background_url: èƒŒæ™¯å›¾ URL
- theme_config_json: ä¸»é¢˜é…ç½®ï¼ˆJSONï¼‰
- created_at: åˆ›å»ºæ—¶é—´
- updated_at: æ›´æ–°æ—¶é—´

### streamer è¡¨ï¼ˆä¸»æ’­ä¿¡æ¯ï¼‰
- id: ä¸»é”®
- name: ä¸»æ’­åç§°
- bilibili_url: Bilibili ç›´æ’­é—´åœ°å€
- created_at: åˆ›å»ºæ—¶é—´
- updated_at: æ›´æ–°æ—¶é—´

## ğŸ“ API æ¥å£

### å…¬å¼€æ¥å£
- `GET /api/health` - å¥åº·æ£€æŸ¥
- `GET /api/setup/status` - å®‰è£…çŠ¶æ€
- `POST /api/setup/install` - æ‰§è¡Œå®‰è£…
- `GET /api/site/meta` - ç«™ç‚¹å…ƒæ•°æ®
- `GET /api/playlist` - æ­Œå•åˆ—è¡¨
- `GET /api/playlist/languages` - è¯­ç§åˆ—è¡¨
- `GET /api/playlist/first-letters` - é¦–å­—æ¯åˆ—è¡¨

### è®¤è¯æ¥å£
- `POST /api/auth/login` - ç™»å½•
- `POST /api/auth/logout` - é€€å‡º
- `GET /api/auth/status` - ç™»å½•çŠ¶æ€
- `POST /api/auth/change-password` - ä¿®æ”¹å¯†ç 

### ç®¡ç†æ¥å£ï¼ˆéœ€è®¤è¯ï¼‰
- `POST /api/playlist/add` - æ·»åŠ æ­Œæ›²
- `PUT /api/playlist/edit/:id` - ç¼–è¾‘æ­Œæ›²
- `DELETE /api/playlist/delete/:id` - åˆ é™¤æ­Œæ›²
- `POST /api/playlist/import` - å¯¼å…¥æ­Œå•
- `GET /api/playlist/export` - å¯¼å‡ºæ­Œå•
- `DELETE /api/playlist/clear` - æ¸…ç©ºæ­Œå•
- `PUT /api/site/config` - æ›´æ–°ç«™ç‚¹é…ç½®
- `PUT /api/site/streamer` - æ›´æ–°ä¸»æ’­ä¿¡æ¯
- `POST /api/site/upload` - ä¸Šä¼ æ–‡ä»¶

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- âœ… bcrypt å¯†ç åŠ å¯†ï¼ˆ10è½®åŠ ç›ï¼‰
- âœ… Session è®¤è¯ï¼ŒHttpOnly Cookie
- âœ… CORS è·¨åŸŸä¿æŠ¤
- âœ… SQL æ³¨å…¥é˜²æŠ¤ï¼ˆå‚æ•°åŒ–æŸ¥è¯¢ï¼‰
- âœ… æ–‡ä»¶ä¸Šä¼ ç±»å‹é™åˆ¶
- âœ… æ–‡ä»¶å¤§å°é™åˆ¶ï¼ˆ5MBï¼‰
- âœ… ç”Ÿäº§ç¯å¢ƒ Session å¯†é’¥å¯é…ç½®

## ğŸ“¦ éƒ¨ç½²æ–¹å¼

### 1. Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰
- å®¹å™¨åŒ–è¿è¡Œï¼Œç¯å¢ƒéš”ç¦»
- ä¸€é”®å¯åŠ¨ï¼Œæ— éœ€é…ç½®
- æ•°æ®æŒä¹…åŒ–åˆ°å®¿ä¸»æœº

### 2. æ‰‹åŠ¨éƒ¨ç½²
- é€‚åˆå¼€å‘ç¯å¢ƒ
- å¯è‡ªå®šä¹‰é…ç½®
- ä½¿ç”¨ PM2 ç®¡ç†è¿›ç¨‹

### 3. Nginx åå‘ä»£ç†
- æ”¯æŒ HTTPS
- è´Ÿè½½å‡è¡¡
- é™æ€èµ„æºç¼“å­˜

## ğŸ¯ è®¾è®¡åŸåˆ™

1. **ç”¨æˆ·ä½“éªŒä¼˜å…ˆ**
   - æµç•…çš„åŠ¨ç”»
   - æ¸…æ™°çš„åé¦ˆ
   - ç®€æ´çš„æ“ä½œæµç¨‹

2. **æ€§èƒ½ä¼˜åŒ–**
   - ä»£ç åˆ†å‰²
   - æ‡’åŠ è½½
   - æ•°æ®åº“ç´¢å¼•
   - å›¾ç‰‡å‹ç¼©

3. **å®‰å…¨å¯é **
   - è®¤è¯æˆæƒ
   - æ•°æ®åŠ å¯†
   - è¾“å…¥éªŒè¯
   - é”™è¯¯å¤„ç†

4. **æ˜“äºç»´æŠ¤**
   - æ¨¡å—åŒ–è®¾è®¡
   - æ¸…æ™°çš„ä»£ç ç»“æ„
   - å®Œæ•´çš„æ³¨é‡Š
   - è¯¦ç»†çš„æ–‡æ¡£

## ğŸ”® æœªæ¥è®¡åˆ’

- [ ] å¤šä¸»é¢˜é¢„è®¾åŒ…
- [ ] æ­Œå•æ ‡ç­¾ç³»ç»Ÿ
- [ ] æ‰¹é‡æ“ä½œåŠŸèƒ½
- [ ] æ­Œæ›²è¯„åˆ†ç³»ç»Ÿ
- [ ] æ’­æ”¾å†å²è®°å½•
- [ ] ç”¨æˆ·æ”¶è—åŠŸèƒ½
- [ ] æ­Œè¯æ˜¾ç¤º
- [ ] éŸ³é¢‘æ’­æ”¾å™¨
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] ç§»åŠ¨ç«¯ä¼˜åŒ–

## ğŸ“ æ”¯æŒ

- ğŸ“– æŸ¥çœ‹ [README.md](README.md) äº†è§£ä½¿ç”¨æ–¹æ³•
- ğŸ“ æŸ¥çœ‹ [INSTALL.md](INSTALL.md) äº†è§£å®‰è£…æ­¥éª¤
- ğŸ› æäº¤ [Issue](https://github.com/your-username/vup-music/issues) æŠ¥å‘Šé—®é¢˜
- ğŸ’¬ å‚ä¸ [Discussions](https://github.com/your-username/vup-music/discussions) è®¨è®º

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

**é‡æ„å®Œæˆæ—¶é—´**: 2026-01-09  
**ç‰ˆæœ¬**: 1.0.0  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

ğŸ‰ é¡¹ç›®å·²å®Œæ•´é‡æ„ï¼Œæ‰€æœ‰åŠŸèƒ½å‡å·²å®ç°å¹¶æµ‹è¯•é€šè¿‡ï¼

